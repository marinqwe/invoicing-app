{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/marin/Desktop/invoicing-solutions/frontend/components/CreateInvoice.js\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  query LAST_CREATED_INVOICE_QUERY {\\n    invoices(last: 1) {\\n      id\\n      status\\n      currency\\n      isPaid\\n      name {\\n        id\\n        sfx\\n        yearIssued\\n      }\\n      items {\\n        id\\n        description\\n        price\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation CREATE_INVOICE_MUTATION($currency: String!, $status: String!, $isPaid: Boolean!) {\\n    createInvoice(currency: $currency, status: $status, isPaid: $isPaid) {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { Mutation, Query } from 'react-apollo';\nimport Error from './ErrorMessage';\nimport Router from 'next/router';\nimport Form from './styles/Form';\nimport styled from 'styled-components';\nimport { QUERY_ALL_INVOICES } from './InvoiceList'; //crazy good css\n\nvar CreateInvoiceStyles = styled.div.withConfig({\n  displayName: \"CreateInvoice__CreateInvoiceStyles\",\n  componentId: \"b68rq4-0\"\n})([\"display:flex;width:300px;flex-direction:column;label{display:flex;justify-content:flex-start;height:30px;input{position:absolute;}select{width:70px;margin:5px 5px 0 5px;}}\"]);\nvar CREATE_INVOICE_MUTATION = gql(_templateObject());\nvar LAST_CREATED_INVOICE_QUERY = gql(_templateObject2());\n\nvar CreateInvoice =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateInvoice, _Component);\n\n  function CreateInvoice() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CreateInvoice);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CreateInvoice)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      status: 'DRAFT',\n      currency: 'eur',\n      isPaid: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"togglePaidHandler\", function () {\n      _this.setState(function (prevState) {\n        return {\n          isPaid: !prevState.isPaid\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"selectCurrencyHandler\", function (e) {\n      var value = e.target.value;\n\n      _this.setState(function () {\n        return {\n          currency: value\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeStatusHandler\", function (e) {\n      var value = e.target.value;\n\n      _this.setState(function () {\n        return {\n          status: value\n        };\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(CreateInvoice, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          isPaid = _this$state.isPaid,\n          currency = _this$state.currency,\n          status = _this$state.status;\n      return React.createElement(Mutation, {\n        mutation: CREATE_INVOICE_MUTATION,\n        variables: this.state,\n        refetchQueries: [{\n          query: QUERY_ALL_INVOICES\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, function (createInvoice, _ref) {\n        var error = _ref.error,\n            loading = _ref.loading;\n        return React.createElement(Form, {\n          onSubmit:\n          /*#__PURE__*/\n          function () {\n            var _ref2 = _asyncToGenerator(\n            /*#__PURE__*/\n            _regeneratorRuntime.mark(function _callee(e) {\n              var res;\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      e.preventDefault();\n                      _context.next = 3;\n                      return createInvoice();\n\n                    case 3:\n                      res = _context.sent;\n                      Router.push({\n                        pathname: '/invoice',\n                        query: {\n                          id: res.data.createInvoice.id\n                        }\n                      });\n\n                    case 5:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee, this);\n            }));\n\n            return function (_x) {\n              return _ref2.apply(this, arguments);\n            };\n          }(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(Error, {\n          error: error,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }), React.createElement(\"fieldset\", {\n          disabled: loading,\n          \"aria-busy\": loading,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          htmlFor: \"name\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, \"New Invoice\"), React.createElement(CreateInvoiceStyles, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          htmlFor: \"currency\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \"Currency: \"), React.createElement(\"select\", {\n          name: \"currency\",\n          value: currency,\n          onChange: _this2.selectCurrencyHandler,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"usd\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, \"$ (USD)\"), React.createElement(\"option\", {\n          value: \"eur\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, \"\\u20AC (EUR)\"), React.createElement(\"option\", {\n          value: \"cad\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, \"$\\u200E (CAD)\"), React.createElement(\"option\", {\n          value: \"jpy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, \"\\xA5\\u200E (JPY)\"))), React.createElement(\"label\", {\n          htmlFor: \"status\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, \"Status: \"), React.createElement(\"select\", {\n          name: \"status\",\n          value: status,\n          onChange: _this2.changeStatusHandler,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"DRAFT\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, \"Draft\"), React.createElement(\"option\", {\n          value: \"CREATED\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, \"Created\"))), React.createElement(\"label\", {\n          htmlFor: \"isPaid\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"checkbox\",\n          name: \"isPaid\",\n          checked: _this2.state.isPaid,\n          onChange: _this2.togglePaidHandler,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }), isPaid && React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, \"Paid!\")), React.createElement(\"button\", {\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, \"Create\"))));\n      });\n    }\n  }]);\n\n  return CreateInvoice;\n}(Component);\n\nexport default CreateInvoice;\nexport { CREATE_INVOICE_MUTATION, LAST_CREATED_INVOICE_QUERY };","map":{"version":3,"sources":["/home/marin/Desktop/invoicing-solutions/frontend/components/CreateInvoice.js"],"names":["React","Component","gql","Mutation","Query","Error","Router","Form","styled","QUERY_ALL_INVOICES","CreateInvoiceStyles","div","CREATE_INVOICE_MUTATION","LAST_CREATED_INVOICE_QUERY","CreateInvoice","status","currency","isPaid","setState","prevState","e","value","target","state","query","createInvoice","error","loading","preventDefault","res","push","pathname","id","data","selectCurrencyHandler","changeStatusHandler","togglePaidHandler"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport gql from 'graphql-tag';\nimport { Mutation, Query } from 'react-apollo';\nimport Error from './ErrorMessage';\nimport Router from 'next/router';\nimport Form from './styles/Form';\nimport styled from 'styled-components';\nimport { QUERY_ALL_INVOICES } from './InvoiceList';\n\n//crazy good css\nconst CreateInvoiceStyles = styled.div`\n  display: flex;\n  width: 300px;\n  flex-direction: column;\n  label {\n    display: flex;\n    justify-content: flex-start;\n    height: 30px;\n    input {\n      position: absolute;\n    }\n    select {\n      width: 70px;\n      margin: 5px 5px 0 5px;\n    }\n  }\n`;\n\nconst CREATE_INVOICE_MUTATION = gql`\n  mutation CREATE_INVOICE_MUTATION($currency: String!, $status: String!, $isPaid: Boolean!) {\n    createInvoice(currency: $currency, status: $status, isPaid: $isPaid) {\n      id\n    }\n  }\n`;\n\nconst LAST_CREATED_INVOICE_QUERY = gql`\n  query LAST_CREATED_INVOICE_QUERY {\n    invoices(last: 1) {\n      id\n      status\n      currency\n      isPaid\n      name {\n        id\n        sfx\n        yearIssued\n      }\n      items {\n        id\n        description\n        price\n      }\n    }\n  }\n`;\n\nclass CreateInvoice extends Component {\n  state = {\n    status: 'DRAFT',\n    currency: 'eur',\n    isPaid: false\n  };\n\n  togglePaidHandler = () => {\n    this.setState(prevState => ({\n      isPaid: !prevState.isPaid\n    }));\n  };\n\n  selectCurrencyHandler = e => {\n    const value = e.target.value;\n\n    this.setState(() => ({\n      currency: value\n    }));\n  };\n\n  changeStatusHandler = e => {\n    const value = e.target.value;\n\n    this.setState(() => ({\n      status: value\n    }));\n  };\n\n  render() {\n    const { isPaid, currency, status } = this.state;\n\n    return (\n      <Mutation\n        mutation={CREATE_INVOICE_MUTATION}\n        variables={this.state}\n        refetchQueries={[{ query: QUERY_ALL_INVOICES }]}\n      >\n        {(createInvoice, { error, loading }) => {\n          return (\n            <Form\n              onSubmit={async e => {\n                e.preventDefault();\n                const res = await createInvoice();\n                Router.push({\n                  pathname: '/invoice',\n                  query: { id: res.data.createInvoice.id }\n                });\n              }}\n            >\n              <Error error={error} />\n              <fieldset disabled={loading} aria-busy={loading}>\n                <label htmlFor=\"name\">New Invoice</label>\n                <CreateInvoiceStyles>\n                  <label htmlFor=\"currency\">\n                    <p>Currency: </p>\n                    <select name=\"currency\" value={currency} onChange={this.selectCurrencyHandler}>\n                      <option value=\"usd\">$ (USD)</option>\n                      <option value=\"eur\">€ (EUR)</option>\n                      <option value=\"cad\">$‎ (CAD)</option>\n                      <option value=\"jpy\">¥‎ (JPY)</option>\n                    </select>\n                  </label>\n                  <label htmlFor=\"status\">\n                    <p>Status: </p>\n                    <select name=\"status\" value={status} onChange={this.changeStatusHandler}>\n                      <option value=\"DRAFT\">Draft</option>\n                      <option value=\"CREATED\">Created</option>\n                    </select>\n                  </label>\n                  <label htmlFor=\"isPaid\">\n                    <input\n                      type=\"checkbox\"\n                      name=\"isPaid\"\n                      checked={this.state.isPaid}\n                      onChange={this.togglePaidHandler}\n                    />\n                    {isPaid && <div>Paid!</div>}\n                  </label>\n\n                  <button type=\"submit\">Create</button>\n                </CreateInvoiceStyles>\n              </fieldset>\n            </Form>\n          );\n        }}\n      </Mutation>\n    );\n  }\n}\nexport default CreateInvoice;\nexport { CREATE_INVOICE_MUTATION, LAST_CREATED_INVOICE_QUERY };\n"]},"metadata":{},"sourceType":"module"}