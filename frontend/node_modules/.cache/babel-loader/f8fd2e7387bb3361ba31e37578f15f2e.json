{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/marin/Desktop/invoicing-solutions/frontend/components/InvoiceList.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query QUERY_ALL_INVOICES($skip: Int = 0, $first: Int = \", \") {\\n    invoices(orderBy: createdAt_DESC, first: $first, skip: $skip) {\\n      id\\n      status\\n      currency\\n      isPaid\\n      createdAt\\n      name {\\n        id\\n        sfx\\n        yearIssued\\n      }\\n      items {\\n        id\\n        description\\n        price\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport styled from 'styled-components';\nimport Pagination from './Pagination';\nimport InvoiceListItem from './InvoiceListItem';\nimport { perPage } from '../config';\nvar QUERY_ALL_INVOICES = gql(_templateObject(), perPage);\nvar Center = styled.div.withConfig({\n  displayName: \"InvoiceList__Center\",\n  componentId: \"icrp3f-0\"\n})([\"text-align:center;\"]);\nvar StyledList = styled.div.withConfig({\n  displayName: \"InvoiceList__StyledList\",\n  componentId: \"icrp3f-1\"\n})([\"display:flex;flex-wrap:wrap;\"]);\n\nvar InvoiceList =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(InvoiceList, _React$Component);\n\n  function InvoiceList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, InvoiceList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(InvoiceList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      currency: '',\n      status: ''\n    });\n\n    return _this;\n  }\n\n  _createClass(InvoiceList, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      this.refetch();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Center, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        page: this.props.page,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), React.createElement(Query, {\n        query: QUERY_ALL_INVOICES,\n        variables: {\n          where: {\n            OR: [{\n              status: this.props.status\n            }, {\n              currency: this.props.currency\n            }]\n          },\n          skip: this.props.page * perPage - perPage\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, function (_ref) {\n        var data = _ref.data,\n            error = _ref.error,\n            loading = _ref.loading,\n            refetch = _ref.refetch;\n        console.log('INVOICE LIST: ', data.invoices);\n        console.log(_this2.props.currency, _this2.props.status);\n        _this2.refetch = refetch;\n        if (loading) return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, \"Loading...\");\n        if (error) return React.createElement(Error, {\n          error: error,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        });\n        return React.createElement(StyledList, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, data.invoices.map(function (invoice) {\n          return React.createElement(InvoiceListItem, {\n            key: invoice.id,\n            invoice: invoice,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          });\n        }));\n      }), React.createElement(Pagination, {\n        page: this.props.page,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return InvoiceList;\n}(React.Component);\n\nexport default InvoiceList;\nexport { QUERY_ALL_INVOICES };","map":{"version":3,"sources":["/home/marin/Desktop/invoicing-solutions/frontend/components/InvoiceList.js"],"names":["React","gql","Query","styled","Pagination","InvoiceListItem","perPage","QUERY_ALL_INVOICES","Center","div","StyledList","InvoiceList","currency","status","prevProps","prevState","refetch","props","page","where","OR","skip","data","error","loading","console","log","invoices","map","invoice","id","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,KAAT,QAAsB,cAAtB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,OAAT,QAAwB,WAAxB;AAEA,IAAMC,kBAAkB,GAAGN,GAAH,oBACmCK,OADnC,CAAxB;AAsBA,IAAME,MAAM,GAAGL,MAAM,CAACM,GAAV;AAAA;AAAA;AAAA,0BAAZ;AAIA,IAAMC,UAAU,GAAGP,MAAM,CAACM,GAAV;AAAA;AAAA;AAAA,oCAAhB;;IAKME,W;;;;;;;;;;;;;;;;;;4DACI;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,MAAM,EAAE;AAFF,K;;;;;;;uCAKWC,S,EAAWC,S,EAAW;AACvC,WAAKC,OAAL;AACD;;;6BAGQ;AAAA;;AACP,aACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,UAAD;AAAY,QAAA,IAAI,EAAE,KAAKC,KAAL,CAAWC,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE,oBAAC,KAAD;AACE,QAAA,KAAK,EAAEX,kBADT;AAEE,QAAA,SAAS,EAAE;AACTY,UAAAA,KAAK,EAAE;AAAEC,YAAAA,EAAE,EAAE,CAAC;AAAEP,cAAAA,MAAM,EAAE,KAAKI,KAAL,CAAWJ;AAArB,aAAD,EAAgC;AAAED,cAAAA,QAAQ,EAAE,KAAKK,KAAL,CAAWL;AAAvB,aAAhC;AAAN,WADE;AAETS,UAAAA,IAAI,EAAE,KAAKJ,KAAL,CAAWC,IAAX,GAAkBZ,OAAlB,GAA4BA;AAFzB,SAFb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOG,gBAAuC;AAAA,YAApCgB,IAAoC,QAApCA,IAAoC;AAAA,YAA9BC,KAA8B,QAA9BA,KAA8B;AAAA,YAAvBC,OAAuB,QAAvBA,OAAuB;AAAA,YAAdR,OAAc,QAAdA,OAAc;AACtCS,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BJ,IAAI,CAACK,QAAnC;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAI,CAACT,KAAL,CAAWL,QAAvB,EAAiC,MAAI,CAACK,KAAL,CAAWJ,MAA5C;AACA,QAAA,MAAI,CAACG,OAAL,GAAeA,OAAf;AAEA,YAAIQ,OAAJ,EAAa,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAP;AACb,YAAID,KAAJ,EAAW,OAAO,oBAAC,KAAD;AAAO,UAAA,KAAK,EAAEA,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACX,eACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGD,IAAI,CAACK,QAAL,CAAcC,GAAd,CAAkB,UAAAC,OAAO;AAAA,iBACxB,oBAAC,eAAD;AAAiB,YAAA,GAAG,EAAEA,OAAO,CAACC,EAA9B;AAAkC,YAAA,OAAO,EAAED,OAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADwB;AAAA,SAAzB,CADH,CADF;AAOD,OArBH,CAFF,EAyBE,oBAAC,UAAD;AAAY,QAAA,IAAI,EAAE,KAAKZ,KAAL,CAAWC,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAzBF,CADF;AA6BD;;;;EAzCuBlB,KAAK,CAAC+B,S;;AA4ChC,eAAepB,WAAf;AACA,SAASJ,kBAAT","sourcesContent":["import React from 'react';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport styled from 'styled-components';\nimport Pagination from './Pagination';\nimport InvoiceListItem from './InvoiceListItem';\nimport { perPage } from '../config';\n\nconst QUERY_ALL_INVOICES = gql`\n  query QUERY_ALL_INVOICES($skip: Int = 0, $first: Int = ${perPage}) {\n    invoices(orderBy: createdAt_DESC, first: $first, skip: $skip) {\n      id\n      status\n      currency\n      isPaid\n      createdAt\n      name {\n        id\n        sfx\n        yearIssued\n      }\n      items {\n        id\n        description\n        price\n      }\n    }\n  }\n`;\n\nconst Center = styled.div`\n  text-align: center;\n`;\n\nconst StyledList = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nclass InvoiceList extends React.Component {\n  state = {\n    currency: '',\n    status: ''\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    this.refetch()\n  }\n  \n\n  render() {\n    return (\n      <Center>\n        <Pagination page={this.props.page} />\n        <Query\n          query={QUERY_ALL_INVOICES}\n          variables={{\n            where: { OR: [{ status: this.props.status }, { currency: this.props.currency }] },\n            skip: this.props.page * perPage - perPage\n          }}\n        >\n          {({ data, error, loading, refetch }) => {\n            console.log('INVOICE LIST: ', data.invoices);\n            console.log(this.props.currency, this.props.status);\n            this.refetch = refetch;\n\n            if (loading) return <p>Loading...</p>;\n            if (error) return <Error error={error} />;\n            return (\n              <StyledList>\n                {data.invoices.map(invoice => (\n                  <InvoiceListItem key={invoice.id} invoice={invoice} />\n                ))}\n              </StyledList>\n            );\n          }}\n        </Query>\n        <Pagination page={this.props.page} />\n      </Center>\n    );\n  }\n}\n\nexport default InvoiceList;\nexport { QUERY_ALL_INVOICES };\n"]},"metadata":{},"sourceType":"module"}