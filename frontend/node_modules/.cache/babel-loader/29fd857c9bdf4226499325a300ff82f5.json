{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/marin/Desktop/invoicing-solutions/frontend/components/Invoice.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query CURRENT_INVOICE_QUERY($id: ID!) {\\n    invoice(where: { id: $id }) {\\n      id\\n      name {\\n        id\\n        sfx\\n        yearIssued\\n      }\\n      items {\\n        id\\n        description\\n        price\\n      }\\n      currency\\n      status\\n      isPaid\\n      createdAt\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Error from './ErrorMessage';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport moment from 'moment';\nimport { UpdateButton } from './styles/Button';\nimport DeleteInvoice from './DeleteInvoice';\nimport ItemList from './ItemList';\nimport UpdateInvoice from './UpdateInvoice';\nimport generatePdf from '../lib/GeneratePdf';\nimport Button from './styles/Button';\nimport InvoicePreview from './styles/Invoice';\nvar CURRENT_INVOICE_QUERY = gql(_templateObject());\nvar StyledInvoice = styled.div.withConfig({\n  displayName: \"Invoice__StyledInvoice\",\n  componentId: \"sc-1yb02wl-0\"\n})([\"margin:5px;padding:5px;display:flex;align-items:flex-start;justify-content:space-around;div{margin-left:2rem;}\"]);\n\nvar Invoice =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Invoice, _Component);\n\n  function Invoice() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Invoice);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Invoice)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      showUpdateForm: false\n    });\n\n    return _this;\n  }\n\n  _createClass(Invoice, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var id = this.props.id;\n      var showUpdate = this.state.showUpdateForm;\n      return React.createElement(Query, {\n        query: CURRENT_INVOICE_QUERY,\n        variables: {\n          id: id\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, function (_ref) {\n        var data = _ref.data,\n            loading = _ref.loading,\n            error = _ref.error;\n        if (loading) return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, \"Loading data...\");\n        if (error) return React.createElement(Error, {\n          error: error,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        });\n        var _data$invoice = data.invoice,\n            name = _data$invoice.name,\n            items = _data$invoice.items,\n            currency = _data$invoice.currency,\n            status = _data$invoice.status,\n            createdAt = _data$invoice.createdAt;\n        return React.createElement(StyledInvoice, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, \"Invoice INV-\", name.yearIssued, \"-\", name.sfx), React.createElement(UpdateButton, {\n          onClick: function onClick() {\n            _this2.setState(function () {\n              return {\n                showUpdateForm: !showUpdate\n              };\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, \"Update\"), React.createElement(DeleteInvoice, {\n          id: data.invoice.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, \"Remove\"), React.createElement(Button, {\n          onClick: function onClick() {\n            generatePdf(data.invoice);\n            console.log('Generated invoice');\n          },\n          disabled: status === 'CREDITED',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, \"Generate PDF\"), showUpdate && React.createElement(UpdateInvoice, {\n          invoice: data.invoice,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        })), React.createElement(InvoicePreview, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, \"` ` `\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }), \"[INV-\", name.yearIssued, \"-\", name.sfx, \"]\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }), \"-----------------------------\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }), \"Created on: \", moment(createdAt).format('MMMM Do YYYY'), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }), items.length > 0 && React.createElement(React.Fragment, null, React.createElement(ItemList, {\n          items: items,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        })), \"-----------------------------\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }), \"TOTAL: 123Todo\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }), \"` ` `\")));\n      });\n    }\n  }]);\n\n  return Invoice;\n}(Component);\n\nexport default Invoice;\nexport { CURRENT_INVOICE_QUERY };","map":{"version":3,"sources":["/home/marin/Desktop/invoicing-solutions/frontend/components/Invoice.js"],"names":["React","Component","styled","Error","gql","Query","moment","UpdateButton","DeleteInvoice","ItemList","UpdateInvoice","generatePdf","Button","InvoicePreview","CURRENT_INVOICE_QUERY","StyledInvoice","div","Invoice","showUpdateForm","id","props","showUpdate","state","data","loading","error","invoice","name","items","currency","status","createdAt","yearIssued","sfx","setState","console","log","format","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Error from './ErrorMessage';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport moment from 'moment';\nimport { UpdateButton } from './styles/Button';\nimport DeleteInvoice from './DeleteInvoice';\nimport ItemList from './ItemList';\nimport UpdateInvoice from './UpdateInvoice';\nimport generatePdf from '../lib/GeneratePdf';\nimport Button from './styles/Button';\nimport InvoicePreview from './styles/Invoice';\n\nconst CURRENT_INVOICE_QUERY = gql`\n  query CURRENT_INVOICE_QUERY($id: ID!) {\n    invoice(where: { id: $id }) {\n      id\n      name {\n        id\n        sfx\n        yearIssued\n      }\n      items {\n        id\n        description\n        price\n      }\n      currency\n      status\n      isPaid\n      createdAt\n    }\n  }\n`;\n\nconst StyledInvoice = styled.div`\n  margin: 5px;\n  padding: 5px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-around;\n  div {\n    margin-left: 2rem;\n  }\n`;\n\nclass Invoice extends Component {\n  state = {\n    showUpdateForm: false\n  };\n\n  render() {\n    const id = this.props.id;\n    const showUpdate = this.state.showUpdateForm;\n\n    return (\n      <Query query={CURRENT_INVOICE_QUERY} variables={{ id }}>\n        {({ data, loading, error }) => {\n          if (loading) return <p>Loading data...</p>;\n          if (error) return <Error error={error} />;\n          const { name, items, currency, status, createdAt } = data.invoice;\n\n          return (\n            <StyledInvoice>\n              <div>\n                <p>\n                  Invoice INV-{name.yearIssued}-{name.sfx}\n                </p>\n                <UpdateButton\n                  onClick={() => {\n                    this.setState(() => ({ showUpdateForm: !showUpdate }));\n                  }}\n                >\n                  Update\n                </UpdateButton>\n                <DeleteInvoice id={data.invoice.id}>Remove</DeleteInvoice>\n                <Button\n                  onClick={() => {\n                    generatePdf(data.invoice);\n                    console.log('Generated invoice');\n                  }}\n                  disabled={status === 'CREDITED'}\n                >\n                  Generate PDF\n                </Button>\n                {showUpdate && <UpdateInvoice invoice={data.invoice} />}\n              </div>\n              <InvoicePreview>\n                <div>\n                ` ` `<br/>\n                [INV-{name.yearIssued}-{name.sfx}]<br/>\n                -----------------------------<br/>\n                Created on: {moment(createdAt).format('MMMM Do YYYY')}<br/>\n                {items.length > 0 && <><ItemList items={items} /><br/></>}\n                -----------------------------<br/>\n                TOTAL: 123Todo<br/>\n                ` ` `\n                </div>\n              </InvoicePreview>\n            </StyledInvoice>\n          );\n        }}\n      </Query>\n    );\n  }\n}\n\nexport default Invoice;\nexport { CURRENT_INVOICE_QUERY };\n"]},"metadata":{},"sourceType":"module"}