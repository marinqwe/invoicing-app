{"ast":null,"code":"import _readOnlyError from \"@babel/runtime-corejs2/helpers/esm/readOnlyError\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/marin/Desktop/invoicing-solutions/frontend/components/Invoice.js\";\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query CURRENT_INVOICE_QUERY($id: ID!) {\\n    invoice(where: { id: $id }) {\\n      id\\n      name {\\n        id\\n        sfx\\n        yearIssued\\n      }\\n      items {\\n        id\\n        description\\n        price\\n      }\\n      currency\\n      status\\n      isPaid\\n      createdAt\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Error from './ErrorMessage';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport moment from 'moment';\nimport { UpdateButton } from './styles/Button';\nimport DeleteInvoice from './DeleteInvoice';\nimport ItemList from './ItemList';\nimport UpdateInvoice from './UpdateInvoice';\nimport generatePdf from '../lib/GeneratePdf';\nimport Button from './styles/Button';\nimport InvoicePreview from './styles/Invoice';\nvar CURRENT_INVOICE_QUERY = gql(_templateObject());\nvar StyledInvoice = styled.div.withConfig({\n  displayName: \"Invoice__StyledInvoice\",\n  componentId: \"sc-1yb02wl-0\"\n})([\"margin:5px;padding:5px;display:flex;align-items:flex-start;justify-content:space-around;div{margin-left:2rem;}\"]);\n\nvar Invoice =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Invoice, _Component);\n\n  function Invoice() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Invoice);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Invoice)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      showUpdateForm: false\n    });\n\n    return _this;\n  }\n\n  _createClass(Invoice, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var id = this.props.id,\n          showUpdate = this.state.showUpdateForm,\n          totalPrice = 0;\n      return React.createElement(Query, {\n        query: CURRENT_INVOICE_QUERY,\n        variables: {\n          id: id\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, function (_ref) {\n        var data = _ref.data,\n            loading = _ref.loading,\n            error = _ref.error;\n        if (loading) return React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, \"Loading data...\");\n        if (error) return React.createElement(Error, {\n          error: error,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        });\n        var _data$invoice = data.invoice,\n            name = _data$invoice.name,\n            items = _data$invoice.items,\n            currency = _data$invoice.currency,\n            status = _data$invoice.status,\n            createdAt = _data$invoice.createdAt;\n        return React.createElement(StyledInvoice, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, \"Invoice INV-\", name.yearIssued, \"-\", name.sfx), React.createElement(UpdateButton, {\n          onClick: function onClick() {\n            _this2.setState(function () {\n              return {\n                showUpdateForm: !showUpdate\n              };\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \"Update\"), React.createElement(DeleteInvoice, {\n          id: data.invoice.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, \"Remove\"), React.createElement(Button, {\n          onClick: function onClick() {\n            generatePdf(data.invoice);\n            console.log('Generated invoice');\n          },\n          disabled: status === 'CREDITED',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, \"Generate PDF\"), showUpdate && React.createElement(UpdateInvoice, {\n          invoice: data.invoice,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        })), React.createElement(InvoicePreview, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, \"` ` `\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }), \"[INV-\", name.yearIssued, \"-\", name.sfx, \"]\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }), \"-----------------------------\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }), \"Created on: \", moment(createdAt).format('MMMM Do YYYY'), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }), items.length > 0 ? React.createElement(React.Fragment, null, React.createElement(ItemList, {\n          items: items,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        })) : React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, \"No items added.\"), \"-----------------------------\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }), items.forEach(function (item) {\n          totalPrice = (_readOnlyError(\"totalPrice\"), +item.price);\n        }), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, \"TOTAL: \\u20AC\", totalPrice), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }), \"` ` `\")));\n      });\n    }\n  }]);\n\n  return Invoice;\n}(Component);\n\nexport default Invoice;\nexport { CURRENT_INVOICE_QUERY };","map":{"version":3,"sources":["/home/marin/Desktop/invoicing-solutions/frontend/components/Invoice.js"],"names":["React","Component","styled","Error","gql","Query","moment","UpdateButton","DeleteInvoice","ItemList","UpdateInvoice","generatePdf","Button","InvoicePreview","CURRENT_INVOICE_QUERY","StyledInvoice","div","Invoice","showUpdateForm","id","props","showUpdate","state","totalPrice","data","loading","error","invoice","name","items","currency","status","createdAt","yearIssued","sfx","setState","console","log","format","length","forEach","item","price"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Error from './ErrorMessage';\nimport gql from 'graphql-tag';\nimport { Query } from 'react-apollo';\nimport moment from 'moment';\nimport { UpdateButton } from './styles/Button';\nimport DeleteInvoice from './DeleteInvoice';\nimport ItemList from './ItemList';\nimport UpdateInvoice from './UpdateInvoice';\nimport generatePdf from '../lib/GeneratePdf';\nimport Button from './styles/Button';\nimport InvoicePreview from './styles/Invoice';\n\nconst CURRENT_INVOICE_QUERY = gql`\n  query CURRENT_INVOICE_QUERY($id: ID!) {\n    invoice(where: { id: $id }) {\n      id\n      name {\n        id\n        sfx\n        yearIssued\n      }\n      items {\n        id\n        description\n        price\n      }\n      currency\n      status\n      isPaid\n      createdAt\n    }\n  }\n`;\n\nconst StyledInvoice = styled.div`\n  margin: 5px;\n  padding: 5px;\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-around;\n  div {\n    margin-left: 2rem;\n  }\n`;\n\nclass Invoice extends Component {\n  state = {\n    showUpdateForm: false\n  };\n\n  render() {\n    const id = this.props.id,\n      showUpdate = this.state.showUpdateForm,\n      totalPrice = 0;\n\n    return (\n      <Query query={CURRENT_INVOICE_QUERY} variables={{ id }}>\n        {({ data, loading, error }) => {\n          if (loading) return <p>Loading data...</p>;\n          if (error) return <Error error={error} />;\n          const { name, items, currency, status, createdAt } = data.invoice;\n\n          return (\n            <StyledInvoice>\n              <div>\n                <p>\n                  Invoice INV-{name.yearIssued}-{name.sfx}\n                </p>\n\n                <UpdateButton\n                  onClick={() => {\n                    this.setState(() => ({ showUpdateForm: !showUpdate }));\n                  }}\n                >\n                  Update\n                </UpdateButton>\n\n                <DeleteInvoice id={data.invoice.id}>Remove</DeleteInvoice>\n\n                <Button\n                  onClick={() => {\n                    generatePdf(data.invoice);\n                    console.log('Generated invoice');\n                  }}\n                  disabled={status === 'CREDITED'}\n                >\n                  Generate PDF\n                </Button>\n\n                {showUpdate && <UpdateInvoice invoice={data.invoice} />}\n              </div>\n              <InvoicePreview>\n                <div>\n                  ` ` `<br />\n                  [INV-{name.yearIssued}-{name.sfx}]<br />\n                  -----------------------------\n                  <br />\n                  Created on: {moment(createdAt).format('MMMM Do YYYY')}\n                  <br />\n                  {items.length > 0 ? (\n                    <>\n                      <ItemList items={items} />\n                      <br />\n                    </>\n                  ) : (\n                    <p>No items added.</p>\n                  )}\n                  -----------------------------\n                  <br />\n                  {\n                    items.forEach(item => {\n                      totalPrice = +item.price;\n                    })\n                  }\n                  <p>TOTAL: â‚¬{totalPrice}</p>\n                  <br />` ` `\n                </div>\n              </InvoicePreview>\n            </StyledInvoice>\n          );\n        }}\n      </Query>\n    );\n  }\n}\n\nexport default Invoice;\nexport { CURRENT_INVOICE_QUERY };\n"]},"metadata":{},"sourceType":"module"}